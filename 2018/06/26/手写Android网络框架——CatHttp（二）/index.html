<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="日常技术分享">
    

    <!--Author-->
    
        <meta name="author" content="Pan Hao">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="手写Android网络框架——CatHttp（二）"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="日常技术分享" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="panhaos_blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>手写Android网络框架——CatHttp（二） - panhaos_blog</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 ph5-ns ph3 text-light">
    
    <nav class="db dt-l w-100 mw8 center border-box pv3">
        <a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="panhaos_blog">
            <img src="http://www.codeblocq.com/assets/projects/hexo-theme-anodyne/assets/anodyne.svg" class="dib h3" alt="panhaos_blog">
        </a>
        <div class="db dtc-l v-mid w-100 w-75-l tc tr-l">
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/" 
                    title="主页">
                    主页
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/archives" 
                    title="档案">
                    档案
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/about.html" 
                    title="关于">
                    关于
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/contact.html" 
                    title="联系">
                    联系
                </a>
            
        </div>
    </nav>

    <!-- Title -->
    <div class="w-100 mw8 center vh-40 dt">
        <div class="dtc v-mid white">
            <h1 class="f1-l f2-m tc tc-m tl-ns">手写Android网络框架——CatHttp（二）</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2018-06-26</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon fa fa-file-text-o"></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    

                    <!-- Main Post Content -->
                    <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a><strong>前言</strong></h1><p>上一篇文章已经对<code>http</code>协议和整体框架做了一个大致的介绍：<br><a href="https://juejin.im/post/5a61a848f265da3e253c3c06" target="_blank" rel="noopener">手写Android网络框架——CatHttp（一）</a></p>
<p>这篇文章我们主要就分析下具体子类是如何实现，以什么方式构建成可以被服务器识别并接受的数据类型提交上去的。所以这篇文章我们主要讨论正文的数据类型和格式。</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/1/19/1610d7ed5eccc39a?w=240&amp;h=240&amp;f=jpeg&amp;s=721490" alt="这里写图片描述"></p>
<h1 id="Http正文"><a href="#Http正文" class="headerlink" title="Http正文"></a><strong>Http正文</strong></h1><p>并不是每种请求方式都能携带正文，如<code>post</code>和<code>put</code>可以携带正文，而<code>get</code>和<code>delete</code>不能携带正文，有参数的话直接拼接在<code>url</code>后面。而不同的正文类型对应的一个请求头（<code>Content-Type</code>）是不同的，<code>Http</code>协议根据这个请求头按照对应的类型去解析正文。</p>
<h2 id="正文类型"><a href="#正文类型" class="headerlink" title="正文类型"></a><strong>正文类型</strong></h2><h3 id="表单"><a href="#表单" class="headerlink" title="表单"></a><strong>表单</strong></h3><p>如果正文传入的是表单，那么请求头声明的<code>ContentType</code>为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">application/x-www-form-urlencoded; charset=UTF-8</span><br></pre></td></tr></table></figure>
<p>表单组织的结构格<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username=zhangsan&amp;pwd=12345&amp;date=2015</span><br></pre></td></tr></table></figure></p>
<p>当两者均满足该要求时，服务器可以正常解析表单里的数据。</p>
<h3 id="文件-二进制"><a href="#文件-二进制" class="headerlink" title="文件/二进制"></a><strong>文件/二进制</strong></h3><p>在最初的 <code>http</code> 协议中，没有上传文件方面的功能。 <code>rfc1867</code>为 <code>http</code> 协议添加了这个功能。</p>
<p>如果想传输文件或者一组二进制字节，则请求头声明的<code>Content-Type</code>声明为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;multipart/from-data; boundary=&quot; + boundary;</span><br></pre></td></tr></table></figure></p>
<p>其中<code>boundary</code>是一个随机数，在下面的正文格式中会使用该<code>boundary</code>作为标识：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">--AaB03x</span><br><span class="line">Content-Disposition: form-data; name=&quot;field1&quot;</span><br><span class="line"></span><br><span class="line">Joe Blow</span><br><span class="line">--AaB03x</span><br><span class="line">Content-Disposition: form-data; name=&quot;pics&quot;; filename=&quot;file1.txt&quot;</span><br><span class="line">Content-Type: text/plain</span><br><span class="line"></span><br><span class="line"> ... contents of file1.txt ...</span><br><span class="line">--AaB03x--</span><br></pre></td></tr></table></figure>
<p>可以看到，其实<code>Multipart</code>的方式也同时支持传输键值对，只是构造的方式不一样，每一个（部分）<br>，姑且称为部分，都是以<code>--boundary</code>开始的，并且后面跟着类似请求头的键值对，用来说明数据类型，每部分的数据正文跟这种“请求头”分隔开。</p>
<p>了解了不同正文的格式，我们就可以实现我们的子类了。</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/1/19/1610d7ed5ed9e571?w=240&amp;h=240&amp;f=jpeg&amp;s=45956" alt="这里写图片描述"></p>
<p>针对于文件这种格式会比较复杂，但是观察会有一个共同点，也就是我们说的“部分”，这里用<code>Part</code>表示，下面先看具体的<code>http</code>任务是怎么执行的</p>
<h1 id="Http任务的执行"><a href="#Http任务的执行" class="headerlink" title="Http任务的执行"></a><strong>Http任务的执行</strong></h1><h2 id="HttpCall"><a href="#HttpCall" class="headerlink" title="HttpCall"></a><strong>HttpCall</strong></h2><p>可以看到，实际的Call实际不管是同步还是异步，都是调用了<code>HttpThreadPool</code>提供的结构来执行<code>Task</code>，从而调度任务的执行的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">public class HttpCall implements Call &#123;</span><br><span class="line"></span><br><span class="line">    final Request request;</span><br><span class="line"></span><br><span class="line">    final CatHttpClient.Config config;</span><br><span class="line"></span><br><span class="line">    private IRequestHandler requestHandler = new RequestHandler();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public HttpCall(CatHttpClient.Config config, Request request) &#123;</span><br><span class="line">        this.config = config;</span><br><span class="line">        this.request = request;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Response execute() &#123;</span><br><span class="line">        Callable&lt;Response&gt; task = new SyncTask();</span><br><span class="line">        Response response;</span><br><span class="line">        try &#123;</span><br><span class="line">            response = HttpThreadPool.getInstance().submit(task);</span><br><span class="line">            return response;</span><br><span class="line">        &#125; catch (ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return new Response.Builder()</span><br><span class="line">                .code(400)</span><br><span class="line">                .message(&quot;线程异常中断&quot;)</span><br><span class="line">                .body(new ResponseBody(null))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void enqueue(Callback callback) &#123;</span><br><span class="line">        Runnable runnable = new HttpTask(this, callback, requestHandler);</span><br><span class="line">        HttpThreadPool.getInstance().execute(new FutureTask&lt;&gt;(runnable, null));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 同步提交Callable</span><br><span class="line">     */</span><br><span class="line">    class SyncTask implements Callable&lt;Response&gt; &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public Response call() throws Exception &#123;</span><br><span class="line">            Response response = requestHandler.handlerRequest(HttpCall.this);</span><br><span class="line">            return response;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="RequestHandler"><a href="#RequestHandler" class="headerlink" title="RequestHandler"></a><strong>RequestHandler</strong></h2><p><code>RequestHandler</code> 是网络请求的处理者，将请求的<code>Request</code>解析成标准的<code>Http</code>格式的请求提交给服务器并获取服务器返回的内容。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">public class RequestHandler implements IRequestHandler &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Response handlerRequest(HttpCall call) throws IOException &#123;</span><br><span class="line"></span><br><span class="line">        HttpURLConnection connection = mangeConfig(call);</span><br><span class="line"></span><br><span class="line">        if (!call.request.heads.isEmpty()) addHeaders(connection, call.request);</span><br><span class="line"></span><br><span class="line">        if (call.request.body != null) writeContent(connection, call.request.body);</span><br><span class="line"></span><br><span class="line">        if (!connection.getDoOutput()) connection.connect();</span><br><span class="line"></span><br><span class="line">        //解析返回内容</span><br><span class="line">        int responseCode = connection.getResponseCode();</span><br><span class="line">        if (responseCode &gt;= 200 &amp;&amp; responseCode &lt; 400) &#123;</span><br><span class="line">            byte[] bytes = new byte[1024];</span><br><span class="line">            int len;</span><br><span class="line">            InputStream ins = connection.getInputStream();</span><br><span class="line">            ByteArrayOutputStream baos = new ByteArrayOutputStream();</span><br><span class="line">            while ((len = ins.read(bytes)) != -1) &#123;</span><br><span class="line">                baos.write(bytes, 0, len);</span><br><span class="line">            &#125;</span><br><span class="line">            Response response = new Response</span><br><span class="line">                    .Builder()</span><br><span class="line">                    .code(responseCode)</span><br><span class="line">                    .message(connection.getResponseMessage())</span><br><span class="line">                    .body(new ResponseBody(baos.toByteArray()))</span><br><span class="line">                    .build();</span><br><span class="line">            try &#123;</span><br><span class="line">                ins.close();</span><br><span class="line">                connection.disconnect();</span><br><span class="line">            &#125; finally &#123;</span><br><span class="line">                if (ins != null) ins.close();</span><br><span class="line">                if (connection != null) connection.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">            return response;</span><br><span class="line">        &#125;</span><br><span class="line">        throw new IOException(String.valueOf(connection.getResponseCode()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 用</span><br><span class="line">     *</span><br><span class="line">     * @param connection</span><br><span class="line">     * @param body</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    private void writeContent(HttpURLConnection connection, RequestBody body) throws IOException &#123;</span><br><span class="line">        OutputStream ous = connection.getOutputStream();</span><br><span class="line">        body.writeTo(ous);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * HttpUrlConnection基本参数的配置</span><br><span class="line">     *</span><br><span class="line">     * @param call</span><br><span class="line">     * @return</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    private HttpURLConnection mangeConfig(HttpCall call) throws IOException &#123;</span><br><span class="line">        URL url = new URL(call.request.url);</span><br><span class="line">        HttpURLConnection connection = (HttpURLConnection) url.openConnection();</span><br><span class="line">        connection.setConnectTimeout(call.config.connTimeout);</span><br><span class="line">        connection.setReadTimeout(call.config.readTimeout);</span><br><span class="line">        connection.setDoInput(true);</span><br><span class="line">        if (call.request.body != null &amp;&amp; Request.HttpMethod.checkNeedBody(call.request.method)) &#123;</span><br><span class="line">            connection.setDoOutput(true);</span><br><span class="line">        &#125;</span><br><span class="line">        return connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 给对象添加请求头</span><br><span class="line">     *</span><br><span class="line">     * @param connection</span><br><span class="line">     * @param request</span><br><span class="line">     */</span><br><span class="line">    private void addHeaders(HttpURLConnection connection, Request request) &#123;</span><br><span class="line">        Set&lt;String&gt; keys = request.heads.keySet();</span><br><span class="line">        for (String key : keys) &#123;</span><br><span class="line">            connection.addRequestProperty(key, request.heads.get(key));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="工具类Util"><a href="#工具类Util" class="headerlink" title="工具类Util"></a><strong>工具类Util</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">public class Util &#123;</span><br><span class="line"></span><br><span class="line">    public static void checkMap(String key, String value) &#123;</span><br><span class="line">        if (key == null) throw new NullPointerException(&quot;key == null&quot;);</span><br><span class="line">        if (key.isEmpty()) throw new NullPointerException(&quot;key is empty&quot;);</span><br><span class="line">        if (value == null) throw new NullPointerException(&quot;value == null&quot;);</span><br><span class="line">        if (value.isEmpty()) throw new NullPointerException(&quot;value is empty&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void checkMethod(Request.HttpMethod method, RequestBody body) &#123;</span><br><span class="line">        if (method == null)</span><br><span class="line">            throw new NullPointerException(&quot;method == null&quot;);</span><br><span class="line">        if (body != null &amp;&amp; Request.HttpMethod.checkNoBody(method))</span><br><span class="line">            throw new IllegalStateException(&quot;方法&quot; + method + &quot;不能有请求体&quot;);</span><br><span class="line">        if (body == null &amp;&amp; Request.HttpMethod.checkNeedBody(method))</span><br><span class="line">            throw new IllegalStateException(&quot;方法&quot; + method + &quot;必须有请求体&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 转换成file的头</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @param fileName</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String trans2FileHead(String key, String fileName) &#123;</span><br><span class="line">        StringBuilder sb = new StringBuilder();</span><br><span class="line">        sb.append(MultipartBody.disposition)</span><br><span class="line">                .append(&quot;name=&quot;)//name=</span><br><span class="line"></span><br><span class="line">                .append(&quot;\&quot;&quot;).append(key).append(&quot;\&quot;&quot;).append(&quot;;&quot;).append(&quot; &quot;)//&quot;key&quot;;</span><br><span class="line"></span><br><span class="line">                .append(&quot;filename=&quot;)//filename</span><br><span class="line"></span><br><span class="line">                .append(&quot;\&quot;&quot;).append(fileName).append(&quot;\&quot;&quot;)//&quot;filename&quot;</span><br><span class="line"></span><br><span class="line">                .append(&quot;\r\n&quot;);</span><br><span class="line"></span><br><span class="line">        return sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 转换成表单形式</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String trans2FormHead(String key) &#123;</span><br><span class="line">        StringBuilder sb = new StringBuilder();</span><br><span class="line">        sb.append(MultipartBody.disposition)</span><br><span class="line">                .append(&quot;name=&quot;)//name=</span><br><span class="line"></span><br><span class="line">                .append(&quot;\&quot;&quot;).append(key).append(&quot;\&quot;&quot;) //&quot;key&quot;</span><br><span class="line"></span><br><span class="line">                .append(&quot;\r\n&quot;);//next line</span><br><span class="line"></span><br><span class="line">        return sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static byte[] getUTF8Bytes(String str) throws UnsupportedEncodingException &#123;</span><br><span class="line">        return str.getBytes(&quot;UTF-8&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="RequestBody正文"><a href="#RequestBody正文" class="headerlink" title="RequestBody正文"></a><strong>RequestBody正文</strong></h1><h2 id="FormBody"><a href="#FormBody" class="headerlink" title="FormBody"></a><strong>FormBody</strong></h2><p>既然表单这种格式比较简单，我们就先构建表单，可以看到，我们可以通过建造者的方式可以直接传入键值对或者<code>map</code>，内部用一个<code>ArrayMap</code>来存储键值对，写出的时候将<code>map</code>里的键值对按照表单的方式构建好再写出去。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">public class FormBody extends RequestBody &#123;</span><br><span class="line"></span><br><span class="line">    // 限制参数不要过多(ArrayMap效率，而且很少需要破k的参数)</span><br><span class="line">    public static final int MAX_FROM = 1000;</span><br><span class="line"></span><br><span class="line">    final Map&lt;String, String&gt; map;</span><br><span class="line"></span><br><span class="line">    public FormBody(Builder builder) &#123;</span><br><span class="line">        this.map = builder.map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String contentType() &#123;</span><br><span class="line">        return &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void writeTo(OutputStream ous) throws IOException &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            ous.write(transToString(map).getBytes(&quot;UTF-8&quot;));</span><br><span class="line">            ous.flush();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if (ous != null) &#123;</span><br><span class="line">                ous.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 拼接请求参数</span><br><span class="line">     *</span><br><span class="line">     * @param map</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    private String transToString(Map&lt;String, String&gt; map) throws UnsupportedEncodingException &#123;</span><br><span class="line">        StringBuilder sb = new StringBuilder();</span><br><span class="line">        Set&lt;String&gt; keys = map.keySet();</span><br><span class="line">        for (String key : keys) &#123;</span><br><span class="line">            if (!TextUtils.isEmpty(sb)) &#123;</span><br><span class="line">                sb.append(&quot;&amp;&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            sb.append(URLEncoder.encode(key, &quot;UTF-8&quot;));</span><br><span class="line">            sb.append(&quot;=&quot;);</span><br><span class="line">            sb.append(URLEncoder.encode(map.get(key), &quot;UTF-8&quot;));</span><br><span class="line">        &#125;</span><br><span class="line">        return sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static class Builder &#123;</span><br><span class="line">        private Map&lt;String, String&gt; map;</span><br><span class="line"></span><br><span class="line">        public Builder() &#123;</span><br><span class="line">            map = new ArrayMap&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public Builder add(String key, String value) &#123;</span><br><span class="line">            if (map.size() &gt; MAX_FROM) throw new IndexOutOfBoundsException(&quot; 请求参数过多&quot;);</span><br><span class="line">            Util.checkMap(key, value);</span><br><span class="line">            map.put(key, value);</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public Builder map(Map&lt;String, String&gt; map) &#123;</span><br><span class="line">            if (map.size() &gt; MAX_FROM) throw new IndexOutOfBoundsException(&quot; 请求参数过多&quot;);</span><br><span class="line">            this.map = map;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public FormBody build() &#123;</span><br><span class="line">            return new FormBody(this);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Part"><a href="#Part" class="headerlink" title="Part"></a><strong>Part</strong></h2><p><code>Part</code>作为一个抽象类提供了两个静态方法用来创建不同的对象，一种是键值对，另一种是文件。其中写出正文的方法按照标准格式来就行了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Part &#123;</span><br><span class="line"></span><br><span class="line">    private Part() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public abstract String contentType();</span><br><span class="line"></span><br><span class="line">    public abstract String heads();</span><br><span class="line"></span><br><span class="line">    public abstract void write(OutputStream ous) throws IOException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 创建构建form的part</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @param value</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static Part create(final String key, final String value) &#123;</span><br><span class="line"></span><br><span class="line">        return new Part() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public String contentType() &#123;</span><br><span class="line">                return null;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public String heads() &#123;</span><br><span class="line">                return Util.trans2FormHead(key);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void write(OutputStream ous) throws IOException &#123;</span><br><span class="line">                ous.write(heads().getBytes(&quot;UTF-8&quot;));</span><br><span class="line">                ous.write(END_LINE);</span><br><span class="line">                ous.write(value.getBytes(&quot;UTF-8&quot;));</span><br><span class="line">                ous.write(END_LINE);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static Part create(final String type, final String key, final File file) &#123;</span><br><span class="line">        if (file == null) throw new NullPointerException(&quot;file 为空&quot;);</span><br><span class="line">        if (!file.exists()) throw new IllegalStateException(&quot;file 不存在&quot;);</span><br><span class="line"></span><br><span class="line">        return new Part() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public String contentType() &#123;</span><br><span class="line">                return type;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public String heads() &#123;</span><br><span class="line">                return Util.trans2FileHead(key, file.getName());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void write(OutputStream ous) throws IOException &#123;</span><br><span class="line">                ous.write(heads().getBytes());</span><br><span class="line">                ous.write(&quot;Content-Type: &quot;.getBytes());</span><br><span class="line">                ous.write(Util.getUTF8Bytes(contentType()));</span><br><span class="line">                ous.write(END_LINE);</span><br><span class="line">                ous.write(END_LINE);</span><br><span class="line">                writeFile(ous, file);</span><br><span class="line">                ous.write(END_LINE);</span><br><span class="line">                ous.flush();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            /**</span><br><span class="line">             * 写出文件</span><br><span class="line">             * @param ous　输出流</span><br><span class="line">             * @param file　文件</span><br><span class="line">             */</span><br><span class="line">            private void writeFile(OutputStream ous, File file) throws IOException &#123;</span><br><span class="line">                FileInputStream ins = null;</span><br><span class="line">                try &#123;</span><br><span class="line">                    ins = new FileInputStream(file);</span><br><span class="line">                    int len;</span><br><span class="line">                    byte[] bytes = new byte[2048];</span><br><span class="line">                    while ((len = ins.read(bytes)) != -1) &#123;</span><br><span class="line">                        ous.write(bytes, 0, len);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    if (ins != null) &#123;</span><br><span class="line">                        ins.close();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="MultipartBody"><a href="#MultipartBody" class="headerlink" title="MultipartBody"></a><strong>MultipartBody</strong></h1><p><code>MultipartBody</code> 存储了一组<code>Part</code>对象，对外提供了两个接口——传入键值对和传入文件，同时按照上面<code>Multipart</code>的格式写出<code>body</code>存储的所有内容。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">public class MultipartBody extends RequestBody &#123;</span><br><span class="line"></span><br><span class="line">    public static final String disposition = &quot;content-disposition: form-data; &quot;;</span><br><span class="line">    public static final byte[] END_LINE = &#123;&apos;\r&apos;, &apos;\n&apos;&#125;;</span><br><span class="line">    public static final byte[] PREFIX = &#123;&apos;-&apos;, &apos;-&apos;&#125;;</span><br><span class="line"></span><br><span class="line">    final List&lt;Part&gt; parts;</span><br><span class="line">    final String boundary;</span><br><span class="line"></span><br><span class="line">    public MultipartBody(Builder builder) &#123;</span><br><span class="line">        this.parts = builder.parts;</span><br><span class="line">        this.boundary = builder.boundary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String contentType() &#123;</span><br><span class="line">        return &quot;multipart/from-data; boundary=&quot; + boundary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void writeTo(OutputStream ous) throws IOException &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            for (Part part : parts) &#123;</span><br><span class="line">                ous.write(PREFIX);</span><br><span class="line">                ous.write(boundary.getBytes(&quot;UTF-8&quot;));</span><br><span class="line">                ous.write(END_LINE);</span><br><span class="line">                part.write(ous);</span><br><span class="line">            &#125;</span><br><span class="line">            ous.write(PREFIX);</span><br><span class="line">            ous.write(boundary.getBytes(&quot;UTF-8&quot;));</span><br><span class="line">            ous.write(PREFIX);</span><br><span class="line">            ous.write(END_LINE);</span><br><span class="line">            ous.flush();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if (ous != null) &#123;</span><br><span class="line">                ous.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class Builder &#123;</span><br><span class="line"></span><br><span class="line">        private String boundary;</span><br><span class="line">        private List&lt;Part&gt; parts;</span><br><span class="line"></span><br><span class="line">        public Builder() &#123;</span><br><span class="line">            this(UUID.randomUUID().toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private Builder(String boundary) &#123;</span><br><span class="line">            this.parts = new ArrayList&lt;&gt;();</span><br><span class="line">            this.boundary = boundary;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public Builder addPart(String type, String key, File file) &#123;</span><br><span class="line">            if (key == null) throw new NullPointerException(&quot;part name == null&quot;);</span><br><span class="line">            parts.add(Part.create(type, key, file));</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public Builder addForm(String key, String value) &#123;</span><br><span class="line">            if (key == null) throw new NullPointerException(&quot;part name == null&quot;);</span><br><span class="line">            parts.add(Part.create(key, value));</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public MultipartBody build() &#123;</span><br><span class="line">            if (parts.isEmpty()) throw new NullPointerException(&quot;part list == null&quot;);</span><br><span class="line">            return new MultipartBody(this);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a><strong>结语</strong></h1><p>具体实现类基本如上，这两篇就是<code>CatHttp</code>的全部内容了，源码已经放在<code>github</code>上——<a href="https://github.com/pan-haos/CatHttp" target="_blank" rel="noopener">传送门</a>，如果有什么不足之处，欢迎大家指正，如果觉得我写的还不错，就关注我吧~<br><img src="https://user-gold-cdn.xitu.io/2018/1/19/1610d7ed5eb8e454?w=240&amp;h=240&amp;f=jpeg&amp;s=50598" alt="这里写图片描述"></p>

                    
                    <!-- Tags Bottom -->
                    

                    <!-- Comments -->
                    



                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 1: About -->
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="/assets/head_img.jpeg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="Pan Hao">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            博主Panhaos，学习Android开发两年时间，于2018年6月毕业于南华大学，目前在TT语音担任Android开发工程师
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 2: Categories -->
                    

                    <!-- Widget 3: Recent Posts -->
                    <div class="mt5 tc tl-l">
    <h3>Recent Posts</h3>
    
        <p>
            <a href="/2018/06/26/手写Android网络框架——CatHttp（一）/">手写Android网络框架——CatHttp（一）</a>
        </p>
    
        <p>
            <a href="/2018/06/26/手写Android网络框架——CatHttp（二）/">手写Android网络框架——CatHttp（二）</a>
        </p>
    
        <p>
            <a href="/2018/06/25/hello-world/">Hello World</a>
        </p>
    
</div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://twitter.com/?lang=en" target="_blank">
                            <i class="fa fa-twitter"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://www.facebook.com/" target="_blank">
                            <i class="fa fa-facebook"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://dribbble.com/" target="_blank">
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/klugjo/hexo-theme-anodyne" target="_blank">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://plus.google.com/" target="_blank">
                            <i class="fa fa-google-plus"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://www.behance.net/" target="_blank">
                            <i class="fa fa-behance"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://500px.com/" target="_blank">
                            <i class="fa fa-500px"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:test@example.com" target="_blank">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="/#" target="_blank">
                            <i class="fa fa-rss"></i>
                        </a>
                    </div>
                
            </div>
            <div class="f6 f5-ns center tc white pt5 fw3">
                @Panhao. 一个具有Geek精神的Android开发者 <a class="link dim white" href="https://github.com/pan-haos/">Panhaos github</a>
            </div>
        </div>
    </div>

<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>